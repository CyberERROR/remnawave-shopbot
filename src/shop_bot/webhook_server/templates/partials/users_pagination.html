{% set cp = current_page or 1 %}
{% set tp = total_pages or 1 %}
{% set query = q or '' %}
{% if cp > 1 %}
<a class="px-3 py-1 rounded bg-white/10 hover:bg-white/20 text-white text-sm"
    href="{{ url_for('users_page', page=cp-1, q=query) }}">«</a>
{% endif %}
{% for p in range(1, tp + 1) %}
<a class="px-3 py-1 rounded {% if p == cp %}bg-primary text-background-dark{% else %}bg-white/10 hover:bg-white/20 text-white{% endif %} text-sm"
    href="{{ url_for('users_page', page=p, q=query) }}">{{ p }}</a>
{% endfor %}
{% if cp < tp %} <a class="px-3 py-1 rounded bg-white/10 hover:bg-white/20 text-white text-sm"
    href="{{ url_for('users_page', page=cp+1, q=query) }}">»</a>
    {% endif %}